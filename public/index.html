<!DOCTYPE html>
<html>
  <head>
    <title>Tangelo</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
  </head>
  <body>
    <div id="main"></div>
    <script src="/js/tantalo.js"></script>
    <script src="/js/main.js"></script>
    <script>
      var tantalo = new Tantalo();
      var app = Elm.Main.fullscreen(loadConfig());

      app.ports.generateEdges.subscribe(function(difficulty) {
        console.log("Generating difficulty of " + difficulty + "...");
        app.ports.generatedEdges.send(tantalo.generateTantalo(difficulty));
      });

      app.ports.saveConfig.subscribe(function(config) {
        console.log("Saving config:", config);
        localStorage.setItem("config:radius", config.radius);
      });

      function loadConfig() {
        var config = {
          radius: parseFloat(localStorage.getItem("config:radius")) || 25,
        };
        console.log("Loading config:", config);
        return config;
      }
    </script>
  </body>
</html>
